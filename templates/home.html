<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flask HTML Example</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <h1>Water My Plants Please</h1>
    <div id="plantArea">
        <p id="plantID">
            plantID: {{ plantID }}
        </p>
        <form method="post" action="/submit">
            <button type="submit">Send water to my poor plants</button>
          </form>
          <div id="sensor-readings">

          </div>
    </div>

    <!-- {% if message %}
    <p>{{ message }}</p>
    {% endif %} -->

</body>
<!-- The script below implements short polling, so that the displayed information is correct -->
<script>
    function fetchData() {
        let plantID = 1
        const url = `/get-sensor-data`;
        fetch('/get-sensor-data')//get request to server
            .then(response => response.json())//response stored as json
            .then(data => {//access the json data here
                console.log(data);  // Here you can log or update the HTML with sensor data
                document.getElementById('sensor-readings').innerHTML = '<p>Humidity: '  + data.humidity + '</p>'+'<p>Sunlight: '  + data.sunlight + '</p>'+ '<p>Timstamp: '  + data.timestamp + '</p>';
            })
            .catch(error => console.error('Error fetching data:', error));
    }
    setInterval(fetchData, 1000);//poll the server every 1 seconds
</script>


</html>